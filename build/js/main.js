function ChineseCheckers(){return this.version="1.0.0",this}ChineseCheckers.prototype=function(){function e(){function e(){var e=$(window).width(),n=$(window).height(),t=1/1.7,r=e/n;r>t?(d=.8*n,l=d*t):(l=.8*e,l/=t),g=d/254,s.width(l),s.height(d),s.find("canvas").each(function(){this.width=l,this.height=d}),o.hide(),function(){var e=1,n=15*g,t={x:5*n,y:n},i=1;w=[];for(var r=0;17>r;r++){for(var c=0;i>c;c++)w.push({x:t.x+c*n,y:t.y});r>=8&&(e=-1),i+=e,t.x+=-e/2*n,t.y+=n/2*Math.sqrt(3)}}(),function(){p=[],i.removeAllChildren(),i.clear();for(var e=4*g,n=0,t=w.length;t>n;n++){var r=w[n];p.push(function(){var c=new createjs.Shape;c.graphics.beginStroke(function(){return 10>n?"blue":10>=t-n?"red":"#999"}()).drawCircle(0,0,e),c.x=r.x,c.y=r.y,i.addChild(c)}())}i.update()}(),m()}function C(){j&&(j=!1,r.update(event))}function m(){var e=6*g,i=null;r.removeAllChildren(),r.clear();for(var c=0,a=t.length;a>c;c++)if(0!==+t[c]){var h=new createjs.Shape;h.graphics.beginFill(function(){return 1===+t[c]?"blue":"red"}()).drawCircle(0,0,e),h.checkerIndex=c+1,h.on("mousedown",function(){x===t[this.checkerIndex-1]-1&&(i&&(i.scaleX=i.scaleY=1),this.scaleX=this.scaleY=1.2,i=this,$.ajax({url:"http://movingai.com/cc/cc.cgi",data:{board:n(),piece:this.checkerIndex,curr:x},dataType:"jsonp",error:function(){console.log(targets),y(targets)}}),f=this.checkerIndex,j=!0)}),h.x=w[c].x,h.y=w[c].y,r.addChild(h)}r.update()}function y(e){var n=this;this.currentHightlight&&($.each(this.currentHightlight,function(e,n){console.log(n),r.removeChild(n)}),this.currentHightlight=[]),$.each(e,function(e,t){console.log(t);var i=5*g,c=new createjs.Shape;c.graphics.beginFill(function(){return"green"}()).drawCircle(0,0,i),c.x=w[+t-1].x,c.y=w[+t-1].y,c.checkerIndex=+t,n.currentHightlight||(n.currentHightlight=[]),n.currentHightlight.push(c),c.on("mousedown",function(){v=this.checkerIndex,k(f,v)}),r.addChild(c)}),j=!0}function k(e,n){t[n-1]=t[e-1],t[e-1]=0,x=x?0:1,m()}t="111111111100000000000000000000000000000000000000000000000000000000000002222222222".split(""),u=1,s=$(".game"),a=$("#bg-stage"),h=$("#main-stage"),o=$("#animation-stage"),i=new createjs.Stage("bg-stage"),r=new createjs.Stage("main-stage"),c=new createjs.Stage("animation-stage");var j=!0;createjs.Ticker.addEventListener("tick",C),e(),$(window).resize(e)}function n(){return t.join("")}var t,i,r,c,a,h,o,s,u,g,l,d,f,v,w=[],p=[],x=1;return{test:function(){console.log(this)},tringify:n,run:function(){e(),console.log("i'm running!")}}}(),$(document).ready(function(){(new ChineseCheckers).run()});